@import "tailwindcss";
@import "tw-animate-css";
@source "../node_modules/streamdown/dist/*.js";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

:root {
  --background: oklch(1.0 0 0);
  --foreground: #121113;
  --card: oklch(1.0 0 0);
  --card-foreground: #121113;
  --popover: oklch(1.0 0 0);
  --popover-foreground: #121113;
  --primary: oklch(0.6716 0.1368 48.513);
  --primary-foreground: oklch(1.0 0 0);
  --secondary: oklch(0.536 0.0398 196.028);
  --secondary-foreground: oklch(1.0 0 0);
  --muted: oklch(0.967 0.0029 264.5419);
  --muted-foreground: oklch(0.551 0.0234 264.3637);
  --accent: oklch(0.9491 0 0);
  --accent-foreground: #121113;
  --destructive: oklch(0.6368 0.2078 25.3313);
  --destructive-foreground: oklch(0.9851 0 0);
  --border: oklch(0.9276 0.0058 264.5313);
  --input: oklch(0.9276 0.0058 264.5313);
  --ring: oklch(0.6716 0.1368 48.513);
  --chart-1: oklch(0.594 0.0443 196.0233);
  --chart-2: oklch(0.7214 0.1337 49.9802);
  --chart-3: oklch(0.8721 0.0864 68.5474);
  --chart-4: oklch(0.6268 0 0);
  --chart-5: oklch(0.683 0 0);
  --sidebar: oklch(0.967 0.0029 264.5419);
  --sidebar-foreground: #121113;
  --sidebar-primary: oklch(0.6716 0.1368 48.513);
  --sidebar-primary-foreground: oklch(1.0 0 0);
  --sidebar-accent: oklch(1.0 0 0);
  --sidebar-accent-foreground: #121113;
  --sidebar-border: oklch(0.9276 0.0058 264.5313);
  --sidebar-ring: oklch(0.6716 0.1368 48.513);
  /* Fonts â€“ keep your Geist setup */
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --font-serif: serif;
  --radius: 0.75rem;
  --shadow-2xs: 0px 1px 4px 0px hsl(0 0% 0% / 0.03);
  --shadow-xs: 0px 1px 4px 0px hsl(0 0% 0% / 0.03);
  --shadow-sm: 0px 1px 4px 0px hsl(0 0% 0% / 0.05), 0px 1px 2px -1px hsl(0 0% 0% / 0.05);
  --shadow: 0px 1px 4px 0px hsl(0 0% 0% / 0.05), 0px 1px 2px -1px hsl(0 0% 0% / 0.05);
  --shadow-md: 0px 1px 4px 0px hsl(0 0% 0% / 0.05), 0px 2px 4px -1px hsl(0 0% 0% / 0.05);
  --shadow-lg: 0px 1px 4px 0px hsl(0 0% 0% / 0.05), 0px 4px 6px -1px hsl(0 0% 0% / 0.05);
  --shadow-xl: 0px 1px 4px 0px hsl(0 0% 0% / 0.05), 0px 8px 10px -1px hsl(0 0% 0% / 0.05);
  --shadow-2xl: 0px 1px 4px 0px hsl(0 0% 0% / 0.13);
  --tracking-normal: 0rem;
  --spacing: 0.25rem;
  /* Landing animations shared tokens */
  --duration: 10s;
  --gap: 1rem;
}

.dark {
  --background: oklch(0.1797 0.0043 308.1928);
  --foreground: oklch(0.8109 0 0);
  --card: oklch(0.1822 0 0);
  --card-foreground: oklch(0.8109 0 0);
  --popover: oklch(0.1797 0.0043 308.1928);
  --popover-foreground: oklch(0.8109 0 0);
  --primary: oklch(0.7214 0.1337 49.9802);
  --primary-foreground: oklch(0.1797 0.0043 308.1928);
  --secondary: oklch(0.594 0.0443 196.0233);
  --secondary-foreground: oklch(0.1797 0.0043 308.1928);
  --muted: oklch(0.252 0 0);
  --muted-foreground: oklch(0.6268 0 0);
  --accent: oklch(0.3211 0 0);
  --accent-foreground: oklch(0.8109 0 0);
  --destructive: oklch(0.594 0.0443 196.0233);
  --destructive-foreground: oklch(0.1797 0.0043 308.1928);
  --border: oklch(0.252 0 0);
  --input: oklch(0.252 0 0);
  --ring: oklch(0.7214 0.1337 49.9802);
  --chart-1: oklch(0.594 0.0443 196.0233);
  --chart-2: oklch(0.7214 0.1337 49.9802);
  --chart-3: oklch(0.8721 0.0864 68.5474);
  --chart-4: oklch(0.6268 0 0);
  --chart-5: oklch(0.683 0 0);
  --sidebar: oklch(0.1822 0 0);
  --sidebar-foreground: oklch(0.8109 0 0);
  --sidebar-primary: oklch(0.7214 0.1337 49.9802);
  --sidebar-primary-foreground: oklch(0.1797 0.0043 308.1928);
  --sidebar-accent: oklch(0.3211 0 0);
  --sidebar-accent-foreground: oklch(0.8109 0 0);
  --sidebar-border: oklch(0.252 0 0);
  --sidebar-ring: oklch(0.7214 0.1337 49.9802);
}

@layer components {
  /* Light-mode only subtle 3D shading for cards */
  html:not(.dark) [data-slot="card"].card-3d-light {
    border-color: rgb(229 231 235); /* border-gray-200 */
    background-image: linear-gradient(
      to bottom,
      #f9fafb 0%,
      #f4f4f4 40%,
      #ececec 80%
    );
    box-shadow: 0 3px 9px rgba(15, 23, 42, 0.07);
  }
}

body {
  letter-spacing: var(--tracking-normal);
}

/* Selection colors */
::selection {
  background-color: #e78a53;
  color: #121113;
}

::-moz-selection {
  background-color: #e78a53;
  color: #121113;
}

/* ============================================
   SIDEBAR SMOOTH TRANSITIONS
   ============================================ */

/* Sidebar wrapper and content smooth transitions */
[data-slot="sidebar-wrapper"] {
  transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Sidebar gap smooth transition */
[data-slot="sidebar-gap"] {
  transition: width 300ms cubic-bezier(0.4, 0, 0.2, 1);
  will-change: width;
}

/* Sidebar container smooth transition */
[data-slot="sidebar-container"] {
  transition: width 300ms cubic-bezier(0.4, 0, 0.2, 1), 
              left 300ms cubic-bezier(0.4, 0, 0.2, 1), 
              right 300ms cubic-bezier(0.4, 0, 0.2, 1);
  will-change: width, left, right;
}

/* Sidebar inner smooth transition */
[data-slot="sidebar-inner"] {
  transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Sidebar root size to match container (desktop inset layout) */
[data-slot="sidebar"][data-variant="inset"] {
  height: 100svh;
  width: var(--sidebar-width);
}

/* When collapsed in icon mode, match icon container width for consistency */
[data-slot="sidebar"][data-variant="inset"][data-collapsible="icon"][data-state="collapsed"] {
  width: var(--sidebar-width-icon);
}

/* Sidebar menu buttons smooth transition */
[data-slot="sidebar-menu-button"] {
  transition: width 300ms cubic-bezier(0.4, 0, 0.2, 1),
              height 300ms cubic-bezier(0.4, 0, 0.2, 1),
              padding 300ms cubic-bezier(0.4, 0, 0.2, 1),
              background-color 200ms ease,
              color 200ms ease;
}

/* Sidebar group labels smooth fade */
[data-slot="sidebar-group-label"] {
  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1),
              margin-top 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Sidebar main content area smooth margin transition */
[data-slot="sidebar-inset"] {
  transition: margin 300ms cubic-bezier(0.4, 0, 0.2, 1);
  will-change: margin;
}

/* Icons fill with primary color when their pages are active */
[data-active="true"] .icon-home,
[data-active="true"] .icon-savings,
[data-active="true"] .icon-analytics,
[data-active="true"] .icon-trends,
[data-active="true"] .icon-fridge,
[data-active="true"] .icon-data-library {
  fill: var(--primary);
}

/* Chat icon (image) uses filter to tint orange when active */
/* Filter converts black to primary orange color */
/* For #e78a53 (RGB: 231, 138, 83) - more accurate calculation */
[data-active="true"] .icon-chat,
[data-active="true"] img.icon-chat,
button[data-active="true"] .icon-chat,
[data-sidebar="menu-button"][data-active="true"] .icon-chat {
  filter: brightness(0) saturate(100%) invert(58%) sepia(96%) saturate(1234%) hue-rotate(1deg) brightness(102%) contrast(91%);
  transition: filter 0.2s ease;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
    cursor: url('/cursors/cursor-orange.svg') 4 0, auto;
  }

  body {
    @apply bg-background text-foreground;
    cursor: url('/cursors/cursor-orange.svg') 4 0, auto;
  }

  /* Global modern scrollbar styling */
  * {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--muted-foreground) / 0.25) transparent;
  }
  
  *::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  *::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 3px;
  }
  
  *::-webkit-scrollbar-thumb {
    background: hsl(var(--muted-foreground) / 0.2);
    border-radius: 3px;
    transition: background 0.2s ease;
  }
  
  *::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground) / 0.35);
  }
  
  *::-webkit-scrollbar-thumb:active {
    background: hsl(var(--muted-foreground) / 0.5);
  }
  
  *::-webkit-scrollbar-corner {
    background: transparent;
  }

  /* Legacy class for backwards compatibility */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--muted-foreground) / 0.25) transparent;
  }

  /* Interactive elements get the hand pointer cursor */
  a,
  button,
  [role="button"],
  [type="button"],
  [type="submit"],
  [type="reset"],
  select,
  summary,
  [tabindex]:not([tabindex="-1"]),
  label[for],
  .cursor-pointer {
    cursor: url('/cursors/hand-orange.svg') 6 0, pointer;
  }

  /* All children of interactive elements inherit the cursorr */
  a *,
  button *,
  [role="button"] *,
  [type="button"] *,
  [type="submit"] *,
  [type="reset"] *,
  select *,
  summary *,
  [tabindex]:not([tabindex="-1"]) *,
  label[for] *,
  .cursor-pointer * {
    cursor: inherit;
  }

  /* Drag handles use grab cursor with higher specificity */
  .gridstack-drag-handle,
  button.gridstack-drag-handle,
  [role="button"].gridstack-drag-handle,
  span.gridstack-drag-handle {
    cursor: url('/cursors/hand.svg') 6 0, grab !important;
  }

  .gridstack-drag-handle:active,
  button.gridstack-drag-handle:active,
  [role="button"].gridstack-drag-handle:active,
  span.gridstack-drag-handle:active {
    cursor: url('/cursors/grab.svg') 6 0, grabbing !important;
  }

  /* All children of drag handles inherit the grab cursor */
  .gridstack-drag-handle *,
  button.gridstack-drag-handle *,
  [role="button"].gridstack-drag-handle *,
  span.gridstack-drag-handle * {
    cursor: inherit !important;
  }
}

/* ============================================
   MOBILE-FIRST IPHONE OPTIMIZATIONS
   ============================================ */

/* Use 100dvh for proper iPhone viewport handling */
@supports (height: 100dvh) {
  .h-screen-mobile {
    height: 100dvh;
  }

  .min-h-screen-mobile {
    min-height: 100dvh;
  }
}

/* Safe area insets for iPhone notch and home indicator */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .pt-safe {
    padding-top: env(safe-area-inset-top);
  }

  .px-safe {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

/* ============================================
   GLASSMORPHISM UTILITY CLASSES
   ============================================ */

/* Glass card effect - for floating UI elements */
.glass-card {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.dark .glass-card {
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

/* Glass button effect */
.glass-button {
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark .glass-button {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Glass input/search effect */
.glass-input {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.15);
}

.dark .glass-input {
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* ============================================
   FLUID LAYOUT TRANSITIONS
   ============================================ */

/* Smooth transitions for grid items during resize and sidebar toggle */
[data-chart-id] {
  transition: 
    grid-column 300ms cubic-bezier(0.4, 0, 0.2, 1),
    grid-row 300ms cubic-bezier(0.4, 0, 0.2, 1),
    transform 300ms cubic-bezier(0.4, 0, 0.2, 1),
    opacity 200ms ease;
  will-change: transform, opacity;
  /* CSS containment for better performance - prevents layout thrashing */
  contain: layout style;
}

/* Disable transitions during actual drag operations */
[data-chart-id][style*="transform: translate"] {
  transition: none !important;
}

/* Smooth grid container transitions */
.grid {
  transition: gap 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Chart containers - CSS containment for isolation */
[data-slot="chart"] {
  contain: layout style;
  content-visibility: auto;
  contain-intrinsic-size: auto 400px;
}

/* ============================================
   MOBILE LAYOUT UTILITIES
   ============================================ */

/* Edge-to-edge on mobile, constrained on desktop */
@media (max-width: 767px) {
  .mobile-edge-to-edge {
    width: 100%;
    max-width: none;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  /* Remove horizontal overflow on mobile */
  .mobile-no-overflow {
    overflow-x: hidden;
  }

  /* Ensure minimum touch targets */
  .mobile-touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  /* Force all chart cards to full width on mobile (1 per row) */
  [data-chart-id] {
    grid-column: span 1 !important;
  }
}

/* ============================================
   MOBILE BACKGROUND LAYER
   ============================================ */

/* Gradient background for mobile glass effect contrast */
@media (max-width: 767px) {
  .mobile-bg-gradient::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -1;
    background:
      radial-gradient(ellipse at 20% 20%, rgba(231, 138, 83, 0.08) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, rgba(231, 138, 83, 0.05) 0%, transparent 50%),
      linear-gradient(180deg, var(--background) 0%, var(--background) 100%);
    pointer-events: none;
  }

  .dark .mobile-bg-gradient::before {
    background:
      radial-gradient(ellipse at 20% 20%, rgba(231, 138, 83, 0.12) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, rgba(231, 138, 83, 0.08) 0%, transparent 50%),
      linear-gradient(180deg, var(--background) 0%, var(--background) 100%);
  }
}

/* While dragging files over the app we show a full-screen blur overlay. Browser scrollbars
   (especially horizontal) are not blur-able, so we hide them for the duration. */
html[data-file-dragging="true"],
html[data-file-dragging="true"] body {
  overflow: hidden !important;
  overscroll-behavior: none;
}

html[data-file-dragging="true"] * {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

html[data-file-dragging="true"] *::-webkit-scrollbar {
  width: 0 !important;
  height: 0 !important;
}

@layer components {

  /* GridStack container - ensure proper width calculation */
  .grid-stack {
    box-sizing: border-box !important;
    width: 100% !important;
    max-width: 100% !important;
    overflow: visible !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  /* Smooth animations for GridStack items when not dragging */
  .grid-stack>.grid-stack-item {
    transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1), 
                width 300ms cubic-bezier(0.4, 0, 0.2, 1), 
                height 300ms cubic-bezier(0.4, 0, 0.2, 1), 
                left 300ms cubic-bezier(0.4, 0, 0.2, 1), 
                top 300ms cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform, width, height, left, top;
  }

  /* Disable transitions during active drag for immediate responsiveness */
  .grid-stack>.grid-stack-item.ui-draggable-dragging {
    transition: none !important;
    z-index: 1000 !important;
    opacity: 0.95;
    cursor: grabbing !important;
  }

  /* Disable transitions during active resize */
  .grid-stack>.grid-stack-item.ui-resizable-resizing {
    transition: none !important;
    z-index: 1000 !important;
  }

  /* Placeholder styling for drop preview */
  .grid-stack>.grid-stack-placeholder>.placeholder-content {
    background-color: hsl(var(--muted) / 0.3) !important;
    border: 2px dashed hsl(var(--border)) !important;
    border-radius: var(--radius) !important;
  }

  /* Ensure GridStack items and charts don't have scrollbars */
  .grid-stack-item:not(.overflow-visible) {
    overflow: hidden !important;
    box-sizing: border-box !important;
    max-width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* For trends page - Add spacing between cards using transform/positioning */
  .grid-stack-item.overflow-visible {
    overflow: hidden !important;
    padding: 0 !important;
    margin: 0 !important;
    box-sizing: border-box !important;
    max-width: 100% !important;
  }

  /* GridStack's default resize handles - let them show naturally */

  .grid-stack-item-content {
    height: 100% !important;
    width: 100% !important;
    max-width: 100% !important;
    overflow: hidden !important;
    margin: 0 !important;
    padding-top: 12px !important;
    padding-bottom: 12px !important;
    padding-left: 8px !important;
    padding-right: 21px !important;
    box-sizing: border-box !important;
    cursor: inherit;
  }

  .gridstack-drag-handle {
    cursor: grab !important;
  }

  .gridstack-drag-handle:active {
    cursor: grabbing !important;
  }

  .grid-stack-item-content [data-slot="card"] {
    height: 100% !important;
    width: 100% !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
    margin: 0 !important;
    position: relative !important;
  }

  .grid-stack-item-content [data-slot="card-content"] {
    flex: 1 !important;
    min-height: 0 !important;
    overflow: hidden !important;
    display: flex !important;
    flex-direction: column !important;
  }

  /* Allow overflow-visible to override when explicitly set on cards */
  .grid-stack-item-content [data-slot="card"].overflow-visible {
    overflow: visible !important;
  }

  /* Remove padding for trends page grid items to match card size exactly */
  .grid-stack-item-content.overflow-visible {
    overflow: hidden !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  /* For trends page - Create spacing by reducing card size within grid-stack-item */
  /* This creates 16px gaps between cards (8px margin on each side) */
  .grid-stack-item.overflow-visible .grid-stack-item-content.overflow-visible {
    padding: 0 !important;
    margin: 8px !important;
    height: calc(100% - 16px) !important;
    width: calc(100% - 16px) !important;
    box-sizing: border-box !important;
  }

  /* Ensure card fills the reduced content area */
  .grid-stack-item.overflow-visible .grid-stack-item-content.overflow-visible [data-slot="card"] {
    height: 100% !important;
    width: 100% !important;
    margin: 0 !important;
    box-sizing: border-box !important;
    flex-shrink: 0 !important;
    flex-grow: 1 !important;
    position: relative !important;
  }

  /* Position resize handle inside the card in the bottom-right corner */
  /* Account for the 8px margin on grid-stack-item-content to position it inside the card */
  .grid-stack-item.overflow-visible .ui-resizable-handle.ui-resizable-se {
    position: absolute !important;
    right: 8px !important;
    bottom: 8px !important;
    width: 20px !important;
    height: 20px !important;
    z-index: 100 !important;
  }

  /* Hide all other resize handles */
  .grid-stack-item.overflow-visible .ui-resizable-handle:not(.ui-resizable-se) {
    display: none !important;
  }

  /* Analytics page: Position resize handle in bottom-right corner for all cards */
  .grid-stack-item .ui-resizable-handle.ui-resizable-se {
    position: absolute !important;
    right: 8px !important;
    bottom: 8px !important;
    width: 20px !important;
    height: 20px !important;
    z-index: 100 !important;
    user-select: none !important;
  }

  /* Analytics page: Hide all other resize handles */
  .grid-stack-item .ui-resizable-handle:not(.ui-resizable-se) {
    display: none !important;
  }

  /* Ensure grid-stack-item-content doesn't add any spacing and stretches to fill */
  .grid-stack-item.overflow-visible>.grid-stack-item-content.overflow-visible {
    display: flex !important;
    align-items: stretch !important;
    justify-content: stretch !important;
    flex-direction: column !important;
  }

  /* Make sure grid-stack-item itself has no transforms or positioning that affects size */
  .grid-stack-item.overflow-visible[style] {
    box-sizing: border-box !important;
  }

  /* Force grid-stack-item to match its calculated size exactly */
  .grid-stack-item.overflow-visible[style*="width"],
  .grid-stack-item.overflow-visible[style*="height"] {
    box-sizing: border-box !important;
  }

  .chart-polar-bar svg {
    overflow: visible;
  }

  .chart-polar-bar path[data-testid^="arc."] {
    transform-box: fill-box;
    transform-origin: center;
    transition: transform 200ms ease, opacity 200ms ease, filter 200ms ease;
  }

  .chart-polar-bar path[data-testid^="arc."]:hover {
    transform: scale(1.05);
    opacity: 0.92;
    filter: saturate(1.05);
  }

  .chart-polar-bar svg:has(path[data-testid^="arc."]:hover) path[data-testid^="arc."]:not(:hover) {
    opacity: 0.35;
    filter: blur(1px) saturate(0.6);
  }

  @media (prefers-reduced-motion: reduce) {
    .chart-polar-bar path[data-testid^="arc."] {
      transition: none;
    }
  }
}

/* Clerk UserButton popover z-index fix for mobile sidebar */
.cl-userButtonPopoverCard,
.cl-userButtonPopoverActions,
.cl-popoverBox,
.cl-userButtonPopoverRootBox,
.cl-rootBox {
  z-index: 99999 !important;
}

/* Ensure Clerk portal is above everything */
[data-clerk-portal] {
  z-index: 99999 !important;
}